<div class="bg-white p-6 rounded-lg shadow-md flex flex-col gap-6">
  <h2 class="text-2xl font-semibold text-gray-700 mb-4">Statistiques de Guilde</h2>

  @if (averageMemberLevel(); as averageMemberLevel) {
    <div class="text-lg text-gray-800">
      Niveau moyen des membres : <span class="font-bold">{{ averageMemberLevel }}</span>
    </div>
  }

  @if (classCount(); as classCount) {
    <hr class="border-gray-300">

    <app-class-count [classCount]="classCount"></app-class-count>
  }


  @if (eventStats(); as eventStats) {
    <hr class="border-gray-300">

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <div class="bg-amber-200 rounded-lg p-4 flex flex-col items-center">
        <span class="text-sm text-gray-700">Événements / Semaine</span>
        <span
          class="text-amber-700 font-bold text-4xl drop-shadow-lg mt-auto">{{ eventStats.averageEventsPerWeek }}</span>
      </div>

      <div class="bg-indigo-200 rounded-lg p-4 flex flex-col items-center">
        <span class="text-sm text-gray-700">Événements / Mois</span>
        <span
          class="text-indigo-700 font-bold text-4xl drop-shadow-lg mt-auto">{{ eventStats.averageEventsPerMonth }}</span>
      </div>
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-{{ 1 + getEventTypesKeys().length }} gap-6">
      <div class="bg-emerald-200 rounded-lg p-4 flex flex-col items-center">
        <span class="text-sm text-gray-700">Total Événements</span>
        <span class="text-emerald-700 font-bold text-4xl drop-shadow-lg mt-auto">{{ eventStats.totalEvents }}</span>
      </div>

      @for (eventTypeKey of getEventTypesKeys(); track eventTypeKey) {
        <div class="bg-gray-200 rounded-lg p-4 flex flex-col items-center">
          <span class="text-sm text-gray-700">{{ eventTypeKey }}</span>
          <span class="text-gray-700 font-bold text-4xl drop-shadow-lg mt-auto">
            {{ eventStats.totalEventsByType[eventTypeKey] || 0 }}
          </span>
        </div>
      }
    </div>
  }
</div>

