<div class="w-full flex flex-col gap-6">

  <app-page-block title="Événements">

    <ng-container header-action>
      <p-button
        (click)="openCreateEventModal()"
        label="Créer un événement"
        color="primary"
        rounded
        icon="pi pi-plus"
      />
    </ng-container>

    <ng-container content>

      <p-accordion [activeIndex]="[0]">
        <p-accordionTab header="Evenement à venir (inscrit)" contentStyleClass="custom-accordion-content">
          <div class="flex flex-wrap gap-4">
            @if (futureEventsJoined$().length === 0) {
              <div class="text-gray-600">Aucun événement à venir</div>
            } @else {
              @for (event of futureEventsJoined$() | sortBy:'date':'asc'; track event.id) {
                <app-event-item (leaveEvent)="leaveEvent($event)"
                                [event]="event" [currentUser]="currentUser$()!"/>
              }
            }

          </div>
        </p-accordionTab>

        <p-accordionTab header="Evenement à venir (non inscrit)" contentStyleClass="custom-accordion-content">
          <div class="flex flex-wrap gap-4">
            @if (futureEventsNotJoined$().length === 0) {
              <div class="text-gray-600">Aucun événement à venir</div>
            } @else {
              @for (event of futureEventsNotJoined$() | sortBy:'date':'asc'; track event.id) {
                <app-event-item (joinEvent)="joinEvent($event)"
                                [event]="event" [currentUser]="currentUser$()!"/>
              }
            }
          </div>
        </p-accordionTab>

        <p-accordionTab header="Evenement passés" contentStyleClass="custom-accordion-content">
          <div class="flex flex-wrap gap-4">
            @if (pastEvents$().length === 0) {
              <div class="text-gray-600">Aucun événement passé</div>
            } @else {
              @for (event of pastEvents$() | sortBy:'date':'desc'; track event.id) {
                <app-event-item [event]="event"/>
              }
            }
          </div>
        </p-accordionTab>

      </p-accordion>


    </ng-container>

  </app-page-block>


</div>

